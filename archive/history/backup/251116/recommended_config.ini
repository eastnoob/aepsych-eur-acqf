# 推荐配置：针对"效应发现"场景（20-30次采样预算）

[EURAnovaPairAcqf]
# ===== 基础参数 =====
main_weight = 1.0  # ✅ 保持默认（符合设计公式）

# ===== 动态λ_t参数（交互效应自适应）=====
use_dynamic_lambda = True  # ✅ 启用动态交互权重
tau1 = 0.7  # r_t上阈值（>0.7时参数不确定，降低交互权重）
tau2 = 0.3  # r_t下阈值（<0.3时参数已收敛，提高交互权重）
lambda_min = 0.1  # 最小交互权重（初期，参数不确定时）
lambda_max = 1.0  # 最大交互权重（后期，参数已收敛时）

# ===== 动态γ_t参数（信息/覆盖平衡）=====
use_dynamic_gamma = True  # ✅ 启用动态覆盖权重

# 【关键调整】针对小样本预算（20-30次）
# 原始设置：tau_n_min=3, tau_n_max=40
# 问题：20-30次采样时γ_t仍较高，覆盖度占比过大

# 方案A：激进策略（快速转向精细化）
gamma_max = 0.5      # 早期高覆盖
gamma_min = 0.05     # ⬇️ 降低后期覆盖（从0.1→0.05）
tau_n_min = 3        # 3次采样前高覆盖
tau_n_max = 20       # ⬇️ 20次后转向信息（从40→20）

# 方案B：保守策略（持续平衡探索）
# gamma_max = 0.4
# gamma_min = 0.15
# tau_n_min = 5
# tau_n_max = 25

# 方案C：中庸策略（推荐）✅
# gamma_max = 0.5
# gamma_min = 0.1
# tau_n_min = 3
# tau_n_max = 25  # 比原始40更早转向精细化

# ===== 局部扰动参数 =====
local_jitter_frac = 0.1  # 扰动幅度为范围的10%
local_num = 4            # 每个维度4个局部点

# ===== 交互对配置 =====
# 示例：6个自变量，指定关键交互对
# 如果不确定，可以留空（自动探索）或指定所有可能的二阶交互
interaction_pairs = "0,1; 0,2; 0,3; 1,2; 1,3; 2,3"  # 前4个维度的交互

# ===== 覆盖度设置 =====
coverage_method = "min_distance"  # Gower距离的最小距离法
variable_types_list = "categorical, integer, continuous, continuous, categorical, integer"

# ===== 随机种子（确保可重复）=====
random_seed = 42

# ===== 调试选项 =====
debug_components = False  # 设为True可查看各分量贡献

# ========================================
# 参数选择指南
# ========================================

# 1. 如果你的采样预算较小（10-20次）：
#    → tau_n_max = 15（更早转向精细化）
#    → gamma_min = 0.05（后期更聚焦信息）

# 2. 如果你的采样预算较大（40-60次）：
#    → tau_n_max = 40（原始设置）
#    → 可以充分完成"探索→平衡→精细化"三阶段

# 3. 如果你完全不知道哪些效应存在：
#    → gamma_max = 0.6（提高早期覆盖）
#    → tau_n_min = 5（前5次全局探索）

# 4. 如果你有部分先验知识（如怀疑某些交互）：
#    → 显式指定 interaction_pairs
#    → lambda_min = 0.3（即使参数收敛，仍保留一定交互权重）

# ========================================
# 不同场景的γ_t轨迹对比
# ========================================

# 场景A：小预算（20次采样）
# 原始设置（tau_n_max=40）：
#   n=5:  γ_t ≈ 0.47（覆盖主导）
#   n=10: γ_t ≈ 0.42（仍是探索）
#   n=20: γ_t ≈ 0.32（才刚开始转向）← 太慢！

# 调整设置（tau_n_max=20）：
#   n=5:  γ_t ≈ 0.45（覆盖主导）
#   n=10: γ_t ≈ 0.33（平衡阶段）
#   n=20: γ_t = 0.10（精细化）← ✅ 刚好！

# ========================================
# 验证你的配置
# ========================================

# 使用以下代码验证γ_t轨迹：
"""
import numpy as np

def compute_gamma_t(n, tau_n_min=3, tau_n_max=25, gamma_max=0.5, gamma_min=0.1):
    if n < tau_n_min:
        return gamma_max
    elif n >= tau_n_max:
        return gamma_min
    else:
        t_ratio = (n - tau_n_min) / (tau_n_max - tau_n_min)
        return gamma_max - (gamma_max - gamma_min) * t_ratio

# 可视化
for n in [1, 3, 5, 10, 15, 20, 25, 30]:
    gamma = compute_gamma_t(n)
    print(f"n={n:2d}: γ_t={gamma:.3f}, 信息权重={(1-gamma):.1%}, 覆盖权重={gamma:.1%}")
"""

# 期望输出（tau_n_max=25）：
# n= 1: γ_t=0.500, 信息权重=50.0%, 覆盖权重=50.0%
# n= 3: γ_t=0.500, 信息权重=50.0%, 覆盖权重=50.0%
# n= 5: γ_t=0.464, 信息权重=53.6%, 覆盖权重=46.4%
# n=10: γ_t=0.373, 信息权重=62.7%, 覆盖权重=37.3%
# n=15: γ_t=0.282, 信息权重=71.8%, 覆盖权重=28.2%
# n=20: γ_t=0.191, 信息权重=80.9%, 覆盖权重=19.1%
# n=25: γ_t=0.100, 信息权重=90.0%, 覆盖权重=10.0%
# n=30: γ_t=0.100, 信息权重=90.0%, 覆盖权重=10.0%
