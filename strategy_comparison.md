# 采样策略对比：不确定性 vs 信息增益

## 场景：效应发现（未知哪些效应存在）

### 不确定性采样（Uncertainty Sampling）
**策略**：选择模型预测方差/熵最高的点

**优势**：
- ✅ 广泛探索未知区域
- ✅ 避免过早聚焦（不会错过弱效应）
- ✅ 在"效应发现"阶段更鲁棒
- ✅ 与覆盖度结合，确保设计空间的均匀性

**劣势**：
- ⚠️ 可能采样到"噪声大但无效应"的区域
- ⚠️ 参数估计精度可能不是最优（但通常够用）

**适用于**：
- 探索性研究（你的情况！）
- 无明确假设
- 需要发现所有潜在效应

---

### 信息增益（Information Gain）
**策略**：选择能最大化减少参数后验方差的点

**优势**：
- ✅ 直接优化参数估计精度
- ✅ 提高统计检验功效
- ✅ 对已知效应的精细化估计最优

**劣势**：
- ⚠️ 可能过早收敛到"当前模型认为重要"的区域
- ⚠️ 如果早期采样误导模型，可能错过真实效应
- ⚠️ 在高维空间，早期的信息增益可能不可靠

**适用于**：
- 验证性研究（已知效应存在）
- 精细化参数估计
- 有明确假设

---

## 你的场景建议：**不确定性采样（当前实现）**

### 理由：

1. **效应发现优先**
   - 你不知道哪些主效应/交互效应存在
   - 不确定性采样会探索所有"模型不确定"的区域
   - 避免错过重要效应

2. **与ANOVA分解的协同**
   - 当前代码通过 Δi = Ii - I0 识别"扰动后不确定性增加"的维度
   - 这些维度可能包含未被充分探索的效应
   - ANOVA分解会自动区分主效应vs交互效应

3. **动态权重机制已优化参数估计**
   - 代码中的 `r_t`（参数方差比）已经在监控参数不确定性
   - 当参数收敛（r_t高）时，λ_t会降低交互项权重，聚焦主效应
   - 这实际上是一种"自适应策略"：早期探索 → 后期精细化

4. **覆盖度确保设计空间的均匀性**
   - γ_t 机制在样本少时提高覆盖权重
   - 确保不会过度集中在某些区域
   - 对统计分析至关重要（避免多重共线性）

---

## 如果你要用信息增益，会发生什么？

### 模拟场景：
假设你有3个自变量 [A, B, C]，真实模型是：
```
y = β₀ + β_A·A + β_C·C + β_AC·A×C + ε
```
（注意：B 无效应）

**信息增益策略**：
- 第1-5次采样：随机探索，模型误以为 B 重要（噪声导致）
- 第6-15次采样：聚焦在 A×B 空间（错误的交互！）
- 第16-20次：发现 A×C 交互，但样本量不足

**不确定性采样策略**：
- 第1-10次采样：广泛探索 A、B、C 空间
- 第11-15次：模型发现 B 的不确定性不随扰动变化（无效应）
- 第16-20次：聚焦 A×C 交互（正确！）

---

## 最终建议

### 保持当前逻辑：`Di = clamp(Ii - I0, min=0)`

**原因**：
1. ✅ 你的目标是"效应发现"，不是"效应精细化"
2. ✅ 不确定性采样在未知场景下更鲁棒
3. ✅ 动态权重已优化参数估计（r_t 机制）
4. ✅ 覆盖度确保统计分析的有效性

### 关键：确保动态权重工作正常

**检查清单**：
- [ ] γ_t 在样本少时应该高（如 γ_max=0.5 when n<10）
- [ ] γ_t 在样本多时应该低（如 γ_min=0.1 when n>40）
- [ ] λ_t 应该随着参数收敛而降低
- [ ] 覆盖度计算应该考虑所有变量类型

### 可选增强（非必需）：
```python
# 如果你想在后期（样本>30）更聚焦参数估计：
def _compute_dynamic_gamma(self):
    n = self._X_train_np.shape[0]
    if n > 30:  # 后期降低覆盖权重，聚焦信息
        return 0.05
    # ... 原有逻辑
```

---

## 理论支撑

### 贝叶斯实验设计文献：
1. **Chaloner & Verdinelli (1995)**："在参数空间未知时，D-optimal设计（信息增益）可能次优"
2. **Ryan et al. (2016)** - AEPsych理论基础："序数响应的主动学习应平衡探索和利用"
3. **Settles (2012)** - 主动学习综述："不确定性采样在无监督场景下是baseline策略"

### 你的场景符合：
- ✅ 参数空间未知（不知道哪些效应存在）
- ✅ 需要平衡探索和利用
- ✅ 序数响应（Likert量表）

**结论：不确定性采样是理论和实践中的推荐策略。**
